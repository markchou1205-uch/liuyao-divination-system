<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>免費求卦 - 命理教觀室文王卦系統</title>
    <link rel="stylesheet" href="../assets/style.css">
    <link rel="stylesheet" href="../assets/learning-mode.css">
    <link rel="stylesheet" href="../assets/divination-page.css">
    <link rel="stylesheet" href="../assets/ai-divination.css">
    <script src="https://apis.google.com/js/api.js"></script>
    <script src="https://accounts.google.com/gsi/client"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
<!-- 右上角連結到卦師頁面 -->
<div id="professional-link" onclick="goToProfessional()" style="
    position: fixed;
    top: 20px;
    right: 20px;
    padding: 10px 20px;
    background: linear-gradient(135deg, #f5576c, #f093fb);
    color: white;
    border: none;
    border-radius: 25px;
    cursor: pointer;
    z-index: 1000;
    font-size: 14px;
    font-weight: bold;
    text-decoration: none;
    box-shadow: 0 2px 10px rgba(245, 87, 108, 0.3);
    transition: all 0.3s ease;
" onmouseover="this.style.transform='scale(1.05)'; this.style.boxShadow='0 4px 15px rgba(245, 87, 108, 0.4)'" 
   onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 2px 10px rgba(245, 87, 108, 0.3)'">
    🧙‍♂️ 卦師頁面
</div>

    <div class="container">
      <div class="system-title">免費求卦 - 文王卦系統</div>
        <!-- 區塊1 -->
        <div class="section active" id="section1">
            <div class="section-header" id="method-selection-row">
                <div class="form-group">
                    <label>起卦方式：</label>
                    <select id="divination-method">
                        <option value="">請選擇</option>
                        <option value="liuyao">六爻起卦</option>
                        <option value="random">隨機起卦</option>
                    </select>
                </div>

                <!-- 我要問選單 -->
                <div class="form-group">
                    <label>我要問：</label>
                    <select id="question-type">
                        <option value="">請選擇</option>
                        <option value="love-female">感情/問女方</option>
                        <option value="love-male">感情/問男方</option>
                        <option value="parents">問父母</option>
                        <option value="children">問子女</option>
                        <option value="career">問事業</option>
                        <option value="health">問健康</option>
                        <option value="wealth">問財富</option>
                        <option value="partnership">問合作合夥</option>
                        <option value="lawsuit">問官司</option>
                    </select>
                </div>

                <!-- 隱藏的取用神選單 -->
                <div class="form-group" style="display: none;">
                    <label>取用神：</label>
                    <select id="yongshen-method">
                        <option value="">請選擇</option>
                        <option value="shi">世</option>
                        <option value="ying">應</option>
                        <option value="xiongdi">兄弟</option>
                        <option value="zisun">子孫</option>
                        <option value="qicai">妻財</option>
                        <option value="guanGui">官鬼</option>
                        <option value="fumu">父母</option>
                    </select>
                </div>
             
                <!-- 起卦結果顯示區 -->
                <div class="result-inline" id="result-inline">
                    <span id="result-text"></span>
                </div>
            </div>
            
            <div class="section-header" id="date-selection-row" style="border-top: 1px solid #ddd;">
                <!-- 隱藏的日期方法選單 -->
                <div class="form-group" style="display: none;">
                    <label>起卦日期：</label>
                    <select id="date-method">
                        <option value="current">現在日期</option>
                    </select>
                </div>
                
                <!-- 開始起卦按鈕 -->
                <button class="btn" onclick="startDivination()">開始起卦</button>
            </div>

            <!-- 隱藏的指定日期選擇器 -->
            <div class="date-picker hidden" id="date-picker" style="display: none;">
            </div>

            <!-- 隱藏的指定干支選擇器 -->
            <div class="ganzhi-picker hidden" id="ganzhi-picker" style="display: none;">
            </div>
            
            <!-- 表格顯示區域 -->
<div class="tables-container">
    <table class="main-info-table">
        <tr>
            <td class="table-cell">
                <!-- 干支旬空表 -->
                <div class="table-with-title">
                    <div class="table-title">干支旬空</div>
                    <table class="info-table" id="ganzhi-table">
                        <tr>
                            <td>年</td>
                            <td>月</td>
                            <td>日</td>
                            <td>時</td>
                            <td>旬空</td>
                        </tr>
                        <tr>
                            <td id="t1">--</td>
                            <td id="t2">--</td>
                            <td id="t3">--</td>
                            <td id="t4">--</td>
                            <td id="k">--</td>
                        </tr>
                    </table>
                </div>
            </td>
            <td class="table-cell">
                <!-- 五行旺衰表 (初始隱藏) -->
                <div class="table-with-title">
                    <div class="table-title">五行旺衰</div>
                    <table class="info-table hidden" id="wuxing-table">
                        <tr>
                            <td>木</td>
                            <td>火</td>
                            <td>土</td>
                            <td>金</td>
                            <td>水</td>
                        </tr>
                        <tr>
                            <td id="w1">--</td>
                            <td id="w2">--</td>
                            <td id="w3">--</td>
                            <td id="w4">--</td>
                            <td id="w5">--</td>
                        </tr>
                    </table>
                </div>
            </td>
            <td class="table-cell">
                <!-- 神煞表 (初始隱藏) -->
                <div class="table-with-title">
                    <div class="table-title">神煞</div>
                    <table class="info-table hidden" id="shensha-table">
                        <tr>
                            <td>驛馬</td>
                            <td>貴人</td>
                            <td>桃花</td>
                            <td>祿存</td>
                        </tr>
                        <tr>
                            <td id="o1">--</td>
                            <td id="o2">--</td>
                            <td id="o3">--</td>
                            <td id="o4">--</td>
                        </tr>
                    </table>
                </div>
            </td>
        </tr>
    </table>
</div>
            <!-- 主要卦表區域 -->
            <div class="main-table-section hidden" id="main-table-section">
                <table class="main-table">
                    <!-- 本卦和變卦區域 -->
                    <tr class="blue-header">
                        <td colspan="6">GN</td>
                        <td colspan="4">BGN</td>
                    </tr>
                    
                    <!-- 卦位表格 -->
                    <tr class="blue-header">
                        <td>六親</td><td>伏神</td><td>卦象</td><td>地支五行</td><td>六親</td><td class="hidden-column">日月</td>
                        <td>地支五行</td><td>六親</td><td>卦象</td><td class="hidden-column">卦變</td>
                    </tr>
                    
                    <!-- 六爻位置 -->
                    <tr>
                        <td>A6</td><td>B6</td><td>C6</td><td>D6</td><td>E6</td><td class="hidden-column">F6</td>
                        <td>G6</td><td>H6</td><td>I6</td><td class="hidden-column">J6</td>
                    </tr>
                    <tr>
                        <td>A5</td><td>B5</td><td>C5</td><td>D5</td><td>E5</td><td class="hidden-column">F5</td>
                        <td>G5</td><td>H5</td><td>I5</td><td class="hidden-column">J5</td>
                    </tr>
                    <tr>
                        <td>A4</td><td>B4</td><td>C4</td><td>D4</td><td>E4</td><td class="hidden-column">F4</td>
                        <td>G4</td><td>H4</td><td>I4</td><td class="hidden-column">J4</td>
                    </tr>
                    <tr>
                        <td>A3</td><td>B3</td><td>C3</td><td>D3</td><td>E3</td><td class="hidden-column">F3</td>
                        <td>G3</td><td>H3</td><td>I3</td><td class="hidden-column">J3</td>
                    </tr>
                    <tr>
                        <td>A2</td><td>B2</td><td>C2</td><td>D2</td><td>E2</td><td class="hidden-column">F2</td>
                        <td>G2</td><td>H2</td><td>I2</td><td class="hidden-column">J2</td>
                    </tr>
                    <tr>
                        <td>A1</td><td>B1</td><td>C1</td><td>D1</td><td>E1</td><td class="hidden-column">F1</td>
                        <td>G1</td><td>H1</td><td>I1</td><td class="hidden-column">J1</td>
                    </tr>
                </table>
                
                <div class="section-header">
                    <button class="btn" onclick="backToSection1()">返回起卦</button>
                    <button class="btn" id="pigua-btn" onclick="showSimpleInterpretationWithAI()">簡易解卦</button>
                </div>
            </div>
        </div>
    </div>

<!-- 簡易解卦Modal -->
<div id="simple-interpretation-modal" class="modal" style="display: none;">
    <div class="modal-content interpretation-modal">
        <span class="close-btn" onclick="closeSimpleInterpretation()">&times;</span>
        <h3>簡易解卦結果</h3>
        <div id="simple-interpretation-content">
            <!-- 解卦內容將動態載入到這裡 -->
        </div>
        <div class="interpretation-footer">
            <button class="btn btn-secondary" onclick="closeSimpleInterpretation()">關閉</button>
        </div>
    </div>
</div>
<script src="../features/google-drive.js"></script>
<script src="../scripts/lunar-ganzhi.js"></script>
<script src="../scripts/advanced-calculations.js"></script>
<script src="../scripts/gua-calculations.js"></script>
<script src="../features/google-drive-records.js"></script>
<script src="../scripts/script.js"></script>
<script src="../features/file-handler.js"></script>
<script src="../features/learning-mode.js"></script>
<script src="../features/divination-simple.js"></script>
<script src="../features/ai-divination.js"></script>
<script src="../features/analytics-system.js"></script>
</body>
</html>